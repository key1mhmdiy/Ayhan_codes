import tkinter as tk
from tkinter import messagebox
from PROJE_KETABKHANEDB import LOGIN,INSERT_USER
INSERT_USER()
data={}
def main_page():
    window=tk.Tk()
    window.geometry("600x600")
    window.resizable(0,0)
    window.title("صفحه اصلی")
    frame=tk.Frame(window)
    frame.pack(fill="both",expand=True)
    jadval=tk.Listbox(frame,width=45,height=30,justify="left")
    jadval.place(x=20,y=60)

    escroll=tk.Scrollbar(window,orient="vertical",command=jadval.yview,jump=True)
    jadval.configure(yscrollcommand=escroll.set,activestyle=["underline"],border=5)
    escroll.configure(command = jadval.yview)
    escroll.place(x=28,y=66)
    escroll.configure(command = jadval.yview)
    lable1=tk.Label(window,text="لیست کتابخانه",font=("Bnazanin",25),relief="raised")
    lable1.place(x=90,y=10)
    lable2=tk.Label(window,text=" ویرایش اطلاعات کتابها",font=("Bnazanin",25),relief="raised")
    lable2.place(x=320,y=10)
    entry1=tk.Entry(window,width=14,border=5,font=("Bnazanin",25))
    entry1.place(x=320,y=60)
    entry2=tk.Entry(window,width=14,border=5,font=("Bnazanin",25))
    entry2.place(x=320,y=140)
    entry3=tk.Entry(window,width=14,border=5,font=("Bnazanin",25))
    entry3.place(x=320,y=220)
    entry4=tk.Entry(window,width=14,border=5,font=("Bnazanin",25))
    entry4.place(x=320,y=300)
    btn1=tk.Button(window,text="اضافه کردن",font=(25),height=4,width=12,bg="light gray")
    btn1.place(x=320,y=470)
    btn2=tk.Button(window,text="جستجو",font=(25),height=4,width=12,bg="light gray")
    btn2.place(x=320,y=370)
    btn3=tk.Button(window,text="حذف",font=(25),height=4,width=12,bg="light gray")
    btn3.place(x=460,y=470)
    btn4=tk.Button(window,text="آپدیت",font=(25),height=4,width=12,bg="light gray")
    btn4.place(x=460,y=370)
    window.mainloop()
def creat_account():
    window=tk.Tk()
    window.geometry("600x600")
    window.resizable(0,0)
    window.title("ایجاد حساب")  
    lable1=tk.Label(window,text="نام و نام خانوادگی",font=("Bnazanin",25,"bold"))
    lable1.place(x=200,y=30)
    lable2=tk.Label(window,text="نام کاربری",font=("Bnazanin",25,"bold"))
    lable2.place(x=270,y=150)
    lable3=tk.Label(window,text="رمز",font=("Bnazanin",25,"bold"))
    lable3.place(x=270,y=280)
    entry1=tk.Entry(window,width=14,border=5,font=("Bnazanin",25))
    entry2=tk.Entry(window,width=14,border=5,font=("Bnazanin",25))
    entry3=tk.Entry(window,width=14,border=5,font=("Bnazanin",25))
    entry1.place(x=170,y=80)
    entry2.place(x=170,y=200)
    entry3.place(x=170,y=330)
    def insert():
        name=(entry1.get())
        user_name=(entry2.get())
        password=(entry3.get())
        if user_name and name and password in data:
            messagebox.showinfo(title="chek page",message="کاربر با این مشخصات از قبل موجود است")
        elif name=="" or user_name=="" or password=="":
            messagebox.showinfo(title="chek page",message=".پر کردن این فیلدها ضروری است ")
        else:
            data[user_name]=password           
            messagebox.showinfo(title="chek page",message=f"{user_name} با موفقیت اضافه شد!")
    btn1=tk.Button(window,text="ثبتنام",font=("Bnazanin",11,"bold"),height=2,width=15,bg="light gray",command=insert)
    btn1.place(x=225,y=400)
    btn1=tk.Button(window,text="ورود",font=("Bnazanin",11,"bold"),height=2,width=15,bg="light gray",command=loggin)
    btn1.place(x=225,y=460)
    window.mainloop()
def loggin():
    window=tk.Tk()
    window.geometry("600x600")
    window.resizable(0,0)
    window.title("واردشدن")
    lable1=tk.Label(window,text="نام کاربری",font=("Bnazanin",25,"bold"))
    lable1.place(x=250,y=75)
    lable2=tk.Label(window,text="رمز",font=("Bnazanin",25,"bold"))
    lable2.place(x=270,y=195)
    entry1=tk.Entry(window,width=14,border=5,font=("Bnazanin",25))
    entry2=tk.Entry(window,width=14,border=5,font=("Bnazanin",25))
    entry1.place(x=170,y=120)
    entry2.place(x=170,y=240)

    def chek():
        user_name=(entry1.get())
        password=(entry2.get())
        RES = LOGIN(USER_NAME=user_name,PASSWORD=password)            
        if  RES:
            messagebox.showinfo(title="welcome",message="برای ورود به صفحه اصلی تایید کنید")
            window.destroy()
            main_page()
        else:
            messagebox.showinfo(title="chek",message="برای رفتن به ثبتنام تایید کنید")
            window.destroy()
            creat_account()
    btn1=tk.Button(window,text="ثبتنام",font=("Bnazanin",11,"bold"),height=2,width=15,bg="light gray",command=lambda:LOGIN(entry1.get(),entry2.get()))
    btn1.place(x=225,y=330)
    btn2=tk.Button(window,text="ورود",font=("Bnazanin",11,"bold"),height=2,width=15,bg="light gray",command=chek)
    btn2.place(x=225,y=400)
    window.mainloop()

    

loggin()
# creat_account()
# main_page()
